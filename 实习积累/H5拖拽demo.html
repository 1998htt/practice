<!DOCTYPE HTML>
<html>
<head>
<style type="text/css">
#div1, #div2,#div3
{float:left; width:198px; height:66px; margin:10px;padding:10px;border:1px solid #aaaaaa;}
</style>
<script  src="jquery.js"></script>
<script type="text/javascript">
var  pushArr = new Array();
//这里需要等待文档加载完成
window.onload = function(){

	var  test1 = document.getElementById("div1");
	var  test2 = document.getElementById("div2");
	var  test3 = document.getElementById("div3");
	pushArr.push(test1,test2,test3);	
}
function allowDrop(ev)
	{
		ev.preventDefault();
	}

	function drag(ev)
	{
		console.log(ev);
		ev.dataTransfer.setData("Text",ev.target.id);
	}

	function drop(ev)
	{
		
		ev.preventDefault();
		var data=ev.dataTransfer.getData("Text");
		console.log(data);
		console.log(ev.target.id);
		var  swapFirst,swapSecond;
		for (var i = 0;i < pushArr.length;i++){
			if (pushArr[i].id == data){
					swapFirst = i;
			}
			if (pushArr[i].id == ev.target.id){
					swapSecond = i;
			}
		}
		swapArr(swapFirst,swapSecond,pushArr);
		
		reInitAllEle(pushArr);
	}
	function  swapArr(first,second,arr){
		var  temp = pushArr[first];
		pushArr[first] = pushArr[second];
		pushArr[second] = temp;
	}
	function  reInitAllEle(pushArr){
			
			$("#uMain").html('');
			alert(pushArr.length);
			for (var i = 0;i < pushArr.length;i++){
				$("#uMain").append(pushArr[i]);
			}
	}

</script>
</head>
<body>
<div  id = "uMain" >
	<div id="div1"  "drop(event)" "allowDrop(event)"  draggable="true" "drag(event)" >
	  <img src="1.png"  width=20px; height = 15px; />
	</div>
	<div id="div2" "drop(event)" "allowDrop(event)" draggable="true" "drag(event)" >
		
	</div>
	<div id="div3"   "drop(event)" "allowDrop(event)" draggable="true" "drag(event)" >
		<img src="1.png"  width=50px; height = 30px; />
	</div>
	
</div>

</body>
</html>